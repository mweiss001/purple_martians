---------------------------------------------------------
------------------------ Bugs ---------------------------
---------------------------------------------------------





---------------------------------------------------------
------------------------ To Do --------------------------
---------------------------------------------------------

I want something like gate info, but in classic mode for start level

Move my spinning name logo to the right side and have level data on the the left




can I add level name to the filename
How would that look?

level002.pml

level002_Switch_Nest.pml

Can I add the level name to vls





--------------------------------------------------------
--  Things that need to be finished before a release  --
--------------------------------------------------------



--------------------------------------------------------
--  Help Screens To Do  --
--------------------------------------------------------


make much simpler history page for help screens

add to history

Redid entire project to use objects
removed all global variable
refactored almost every line of code

made major changes to netgame,
now works over internet as well as LAN


Purple Martians was started in the winter of 1997 in a cold, dark, one bedroom basement apartment in Victoria, BC.

I was on a seasonal layoff from a menial labor construction job, waiting on unemployment benefits, amd I had some time on my hands.

This was 1997 so the high end PC's were pentium 120 with 16M of RAM. I had an old Compaq 486 laptop.

1997 was the year I first connected the internet. I had a dial-up account with Pacific Coast Net.

It's amazing when I think of the time before the internet. What did we do without it?


I was unusual in that I had access to computers at a much earlier age than almost anyone I knew.

In 1980, when I was 12, my dad brought home a Commodore PET from the college where he taught electronics.

I spent a lot of time figuring out how it worked. That was my first exposure to programming.

BASIC. It seems so simplistic and crude now.

But the joy of typing in commands and seeing the results instantly...it was something I fell in love with.

A few years later the Commodore PET was replaced with an Apple II.

Kind of similar, but the one huge difference was the graphics.

Color. 280x192 hi res graphics. Commands in BASIC to draw pixels and lines.

I created programs that drew string art-moire patterns.

But what I really wanted to do was make a video game.

To have a little player jumping around from level to level, shooting and avoiding enemies,
climbing ladders.

Some early influences were Ms. Pac Man and Donkey Kong Junior, the only 2 games at the local convenience store.
The only time I could see them was during school lunch breaks, because I lived out in the country.
For a few years, I mostly watched other kids play, mesmerized, wanting so bad to have a quarter and a turn.
Lunch time was so short there was only time for a few games, so it was rare that I got a turn.

There were a few games that could be played on the Apple. A pac man clone called snoogle. Lode Runner.

Lode Runner had a big influence on the game I wanted to create. Simple block based, puzzle solving.

Other games that had a huge influence are the Mario series, Doom and of course one of my all time favorites,
Bubble Bobble. That game is so amazing with all of the secrets and special items. I consider it a masterpiece.

I had tried many times to make a game. At the bare minimum I wanted a player that could move and jump on platforms.

I first tried to do that in BASIC on the Apple II. The character was a simple collection of drawn lines and pixels.
Very simple and crude. But even that was agonizingly slow as I attempted to draw and move it across the screen.

I experimented with the vector based shape tables built into the apple, and taught myself the the basics of assembly language.
I made some progress, but it was such a huge task, and I did not have the skills to build a complex project like that in assmebly.
Eventually I grew up, moved out, got a job, and left programming behind. I never did own a computer, they were all borrowed.
The apple that my dad brought home to learn on, and then in high school I hung out lots in the computer lab that had a bunch
of apples also.


It's hard to realize what computers were like back in those days, before the internet.
They were pretty much all stand alone units used for a single purpose.
I used some in the course of my electronics career, but mostly just to perform one specific task.

What got me back into computers was digital audio. I had been writing and recording music with analog tape
machines for years, and was excited to try digital recording. It looked so promising.
Unlimited tracks, non-linear editting, digital effects.

I started that with a Pentium 100 with 8M of RAM and a huge 1.2G HD.
I bought Cakewalk Pro Audio at the local Long and McQuade and a Soundblaster from Radio Shack.

At that time, consumer computer technology was just barely fast enough to record audio.
There was a lot of pain setting things up, and even at the best, it just barely worked.

This was also the time that I really developed a strong dislike for any garbage that Creative Labs makes.
The sound blaster I bought was advertised as full duplex, windows compatible.
Cakewalk said that all it required was a full duplex windows sound card.
It just would not work. It would record and it would play back, but it would not do both at once.
After spending many hours on the phone with tech support, I finally figured out that by design, this card could only
do full duplex by severly degrading the recording quality. So I returned it and bought a much more expensive
sound card that just simply did what it was supposed to.

In the process of getting tech support over the phone, the guys I were talking to told me about these
on-line tech support forums, that would probably help me way more than telephone tech support.

And that was the catalyst. That was the reason I got a dial up internet connection. I think it was $25 a month.
The forums were great, many people running the same software, running into the same issues, and discussing solutions.

I was able to get my DAW (Digital Audio Workstation) fully functional and did quite a lot of recording for
a few months before my computer and a lots of other valuable things were stolen in a break-in.

I lost all of my digital copies of my music, all I had were the cassette tapes master I had recorded from the DAW.

Months passed and I moved into a bedroom in a basement in Oak Bay. Cold, dark, dingy...sketchy people that lived in the
other rooms. Landlady that lived upstairs and complained about the tiniest noise. She literally complained one time about
the music being too loud when I was wearing headphones.

I had this old broke down 486 laptop, and I still had my internet account. I had been laid off for the winter (it happened every year)
so I knew I had some time on my hands. And with the internet I had the entirety of the worlds information just waiting to be explored.

How hard could it be to make some shapes and draw them on the screen? It had been so many years since the Apple II days. The last time
I had tried to program. That was probably around 1987 or so, 10 years ago.

I can't remember all the things I looked at then, but I do remember that even back then, I did not like Microsoft.
What they did in the browser wars, plus many other low down shady tactics, plus just using windows and getting annoyed at all the
stupid design decisions, locked in data, predatory business practices. But the worst for me was the crap software.
Barely functional, riddled with bugs, and only succesfull because they were the largest installed base.

But if I had to use something microsoft to make my game, I resigned myself to give it a shot.

What I found instead was Allegro, a small project by Shawn Hargraves. It was exactly what I was looking for.
I did not want a game engine, what I wanted was a game programming library.
Some simple functions to draw shapes on the screen. Fast.

Allegro is completely free. Thus began my lifelong love of open source, freely distributable software.
The complete opposite of windows.

I would have to learn to program in C. I did not know anything about it, but I learned fast.

The compiler used is gcc. I am so happy I have never once had to use MSVC.

I followed the install directions to setup gcc for windows, installed Allegro 2.0, and set up RHIDE as my integrated develeopment editor.

The best way to learn is by doing. I had a few books on C, and worked through a couple of examples, but then I just focused on getting things done.

Like for example:

Create a display and change its color. Then draw some diferent colored lines on it. Then some other graphics primitives like rectangle and circle.
This is pretty cool! Now back to the first days with the Apple II, I recreated some string art moire patterns. They looked great!
OK, enough with primitives, I want to create some sprites and draw them to the screen. That worked great also.

Then in the spirit of doing everything from scratch, I built tools to create, save and edit my own sprites.
I saved and loaded them one get_pixel and set_pixel at a time.
I learned how to save things to disk, file handles, iostreams, data formats.  All new and all so very cool.

And also I was leaning C at the same time.

C is so simple and elegant, I compare it to the game of chess.

Chess has a very simple set of rules about how each piece can move. Those rules can be learned very easily.
However the strategies of playing the game can take a lifetime to master.

C is similar in that the core functionality of the language is very simple.
How you use those very simple building blocks to create more complex things is an art that can take a lifetime to master.

I had some bad habits from BASIC, but I soon overcame them. Now 25 years later I am still improving all the time.

I love to program. To me all of programming is 'managing complexity'

To simplify, abstract, to make very complex things easier to understand, implement, and maintain.















remove log file viewer and graphs?? why?





somehow describe snap...

hiders

npc







redoing docs one page at a time, since globals and fixed are removed


level array goes into a lot of the drawing sequence, that I don't think it should
should put that in its own file

there is some major rewriting needed for events and inputs



to do:
project org
events




done:
logo
shots
sound
block flags
tile
display
game moves array
level array
level done
timers
input




netgame main
netgame state and dif
netgame server state
netgame client state
netgame client control change
netgame client timing sync
netgame fast packet loop
netgame ping
netgame packets
netgame config
netgame join
netgame server setup
netgame control and monitoring



























---------------------------------------------------------
------------------------ Tests --------------------------
---------------------------------------------------------


test all multiplayer bmsg's
some messages show up twice
it is because of rewind
how am I going to fix it?
set a global flag when rewinding....
don't send game events when flag set...
done...

player join
player shot player is reversed
switched 3 calls to event 40 player hurt player
..fixed



test all enemies collision with player..good
ArchWagon-
Bouncer-
JumpWorm-
Cannon-
PodZilla-
TrakBot-
Cloner-
Block Walker-
Flapper-
VinePod-
always same shape for bouncer

player shot enemy
ArchWagon-
Bouncer-
JumpWorm-
Cannon-
PodZilla-
TrakBot-
Cloner-
Block Walker-
Flapper-
VinePod-
cannon with muliple shots, does not show unless killed

player exploded enemy
ArchWagon
Bouncer
JumpWorm
Cannon
PodZilla
TrakBot
Cloner
Block Walker
Flapper
VinePod
all good

player got shot by:
ArchWagon-
Bouncer-
Cannon-
PodZilla-
TrakBot-
Flapper-
VinePod - says podzilla



ArchWagon
Bouncer
JumpWorm
Cannon
PodZilla
TrakBot
Cloner
Block Walker
Flapper
VinePod



-------------------------------
-- Random thoughts and ideas --
-------------------------------


Make some examples of vinepods to show off in levels
vinepod triggering another vinepod in a chain
vinepod triggering a group of vinepods in a star
vinepod getting out of the way of a shot aimed at it

vinepod flower on good and evil?
also on incinerator??


I could also do an eco draw for vinepods....



when a level is completed and sets a new time record < par and all purple coins collected
auto save that level in a special folder

here are the rules:
- level completed
- all coins
- time less than max so far

this makes me think I might need 2 speed records
one for all coins and one for not..
maybe I could just not count a speed record if all coins are not collected
too much work, just leave it...









I am thinking of having some more buttons on the top of the edit menu

be able to toggle scroll at screen edge on/off
lock screen pos
scroll level by click and drag
zoom level with mouse wheel





working on making the ft_sel look better
all the info I need is in the ft_
the secondaries already have the right offset but the drawing routine can only get it from the real item data structs
I hate re invent or duplicate the drawing routines, can I just extend the exiting ones to pass explicit secondary, like I pass explicit x and y for cutom drawing?


why did I remove skip frame draw?
because 99% of the time, the thing was taking too much time was draw frame itself
netgame expects that the move frames happen exactly when they are supposed to
if I draw then I will screw up the timimg of netgame
I tried a staggered draw but the flashing was too much...
what I did not try was:
frame 1 get new back ground and draw


wait a tick here!
I have discovered that drawing from bitmap to bitmap does not scale well.
but drawing from bitmap to screen does...
I was thinking of drawing as much as I can directly to the screen
right now I draw at full scale from tiles to level_background and level_buffer
then only scale those when drawing to the screen.
so that would not affect the quality there, but maybe the rotation
also maybe the speed



enemies that still use trigger box, pod, vine
could I make them also optionally use trigger inputs
then they could move out of the way of bullets!

what would it take to extend lifts to use splines?

I would also like to make splines have more control points, maybe I'll have to make my own..


here is a huge one:
can level editor be brought under the program state umbrella?
I sort of duplicate level editor modes with program states



I want to see if I can make the player motion more smooth..
especially when riding lifts
but also when the background is scrolling

the player and the rocket might benefit from drawing directly on the screen instead of the screen buffer
it worked for bottom messages, the scaling looks ways better..

I would be nice be be able to do tc and netem things from within my program..
but I would need to figure out how to do that as non-root

If I did I could even do cool things like run training sessions with different network settings...



make a way to force x axis to show either frames or sec..
make a way to measure on graph
like CTRL SHIFT DRAG will display info about box size

make log in settings better:
- make a way to load most recent ping graph with one click
log like cpu, but with a multicolored bar...move, draw, other, all added up
...more



Things to add to settings:

optional resolution in window title
- I can already show it with debug overlay

optional text in bottom frame

main menu level editor shortcut key

level editor ov lock key

options to do the send stuff to clients? including which clients to send to, and text entry to add new ones????
then maybe I could retrieve log from client after netgame???...whoa...that's just crazy

what are the next things I can profile?
how long does it take client to decompress, run a dif, rewind?
how long does a bomb explosion take?
low long does it take to switch blocks?
how long does it take to draw all the blocks?
how long does it take to draw all messages?


what about the other timing thing I was going to do?
start of frame, and where everything else happened....not sure how useful that will be....

I wanted to experiment with differnt s1 and s2 values, but I wanted to be able to actually measure some effect it has.
that was the big push behind the program state thing, then the graph thing, then the settings menu because I want to be able
to measure stuff...



--------------------------------------------------------------------------------------------
I would like to make a mode where the server can run without a local player
I would like to be able to start it from the command line via ssh and control it like that too..
This would kind of suggest that I be able to pause the server...

Fundamentally this will require deep changes.
Right now the sync loop is dependant on the frame_num incrementing, like when the game is running.

This is not a deal breaker, the game loop can still run, just the local server player will not be participating..
There would be no menu stuff possible on the server though. I would need a different way to control it.
--------------------------------------------------------------------------------------------


--------------------------------------------------------------------------------------------
when client starts,
don't show anything about level until initial state is received and client player's view is at the start
--------------------------------------------------------------------------------------------

add 8 char name
it will be saved in config file
it will be the name used for player[0]
where ever I print Player:x, i will now print 'name'





--------------------------------------------------------------------------------------------
as a pre cursor to layered recording
make a demo player on steroids
slider for speed
slider for location
pause, play.
--------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------
Layered multiplayer recording
------------------------------------------------------------------------------------------
How can I do a layered multiplayer recording, where a new player can record while paying back all the old ones?

single player local mode only

play and record mode..

for example:

play file:....
at a specific time start record one player...


I would need a new type of game...

like rungame_record


how does active local player work in rungame mode...


I might need a second game_move_array for this

while recording, copy from original and add from new playing...


how much space is used already by gma?

a drop in the bucket compared to everything else:
16M out of 1300M

so, make a second array

gma2


in rungame all active players have control method 1

make a new control method...like 6 for record rungame


Control panel

file loaded:
timeline with all 8 possible players and a line shown where there is data for each player
current position in savegame

able to seek to any pos
play and pause

set position and record for one player


--------------------------------------------------------------------------------------------
to something more graceful if the next level is not found..
--------------------------------------------------------------------------------------------

option 1: search for next level
option 2: if load fails go back to current level

whatever you do, do not just fail and leave a failed level loaded with menu...
I have changed it to print error to console and merr message on failure
------------------------------------------------------------------


------------------------------------------------------------------
8 character name for player...
------------------------------------------------------------------
I use 8 char for 'player x' already so the text should fit



--------------------------------------------------------------------------------------------
display window hystersis adjust
--------------------------------------------------------------------------------------------
the display window hystersis window thing shoould slowly drift in the direction the player is looking, so they can see further thay way..this is genius and should have been done a long time ago

it works but still needs some bugs worked out

take the players motion into account
if jumping then scroll to see more up
if falling then scroll to see more down

if riding rocket then do the same....

can I just use pxinc and pyinc??
what I am doing is moving the camera...

in hyst gradual:
if you are running in one direction, you will be pushed up against the hyst for that direction
I want it be be ahead of you so you can see where you are going
same with jumping and falling and rockets
some way of using players speed....

---------------------------------


-------------------------------------------------
in log file viewer, make a second array with only the lines that we are showing
this will make the scrolling up and down make much more sense
can do page up and page down intelligently
moving up and down by one line (or 10 or 100) will actually do what we expect
-------------------------------------------------



code stat to do optional alphabetical sort also optional skip header files


make level editor save the window position
make a way to click and drag to move le window
make a button to have le window show current item in center


add a bunch of settings for bottom message:
how many lines: 8 (max 20)
float io = 1.0; // initial opacity
float fo = 0.1; // final opacity
float ivs = 0.5; // initial v size
float fvs = 0.1; // final v size
float ihs = 0.5; // initial h size
float fhs = 0.1; // final h size

which game events cause messages

player tile, text or both
enemy  tile, text or both
item   tile, text or both

how close the player has to be to reduce messages





















-------------------------------------------------
Make an 'about' just like 'help'
-------------------------------------------------

--------------------------------------------------------------------------------------------
Make it so that a client does not have to have the level a server is serving.
--------------------------------------------------------------------------------------------
I am so close anyway.
All that needs to be done is also sync the lift steps...
and the pmgstext

Then every part of the necessary game state is sent.

This way a server can edit a level and clients can play it without needing a copy....

Variables used to save levels in pml format

level_header:    80
l           : 40000
item        : 32000
Efi         :  6400
Ei          : 12800
lifts       :  5280
lift_steps  : 38400
pmsgtext    :250000
------------:------
total       :384960

Variables used for netgame state exchange

players  :  1664
Ei       : 12800
Efi      :  6400
item     : 32000
itemf    : 32000
lifts    :  5280
l        : 40000
---------:------
total    :106144


this will add
lift_steps  : 38400
wait...I also need pmsgtext, and that is not trivial
maybe during join I can compress and send these static things once...
maybe I could send the level file, it is already compressed...

the biggest levels are only 8K
I can already send the state broken up into packets, why not the level??




-------------------------------------------------
Implement a system of data about levels played and results
-------------------------------------------------
keep a text file when ever a level is completed (or abandonded)

abandoned? whenever going to menu and resume allowed?
this part is not essential, only wanted to see how many times started and not finished

level_num
date and time stamp (completed or started)
time to complete
number of players
shots fired
enemies killed
purple coins
enemies left alive at the end
number of deaths

one line per level started?
when complete edit the line

what is the end result?

list of levels with number of times started, completed, abandoned
max time, min time, avg time, total time
enemies left max, min avg
purple coins, max, min avg



-------------------------------------------------
make end pieces for chains and maybe vines and ladders and ropes
-------------------------------------------------
What if I gave my levels names?
That way if they are re-arranged it wont matter
-------------------------------------------------
What if I had an overlay screen for levels
This all sounds very complex...
-------------------------------------------------


------------------------------------------------------
------------------------ Level ideas -----------------
------------------------------------------------------

make a level with block 0 and 1 that look the same but set block manip to change block 1...

make a level that requires traveling on a lift while jumping on and off of switches

level where you have to throw mines at the other player..

How about a level where you have to clone switches??

how about a level where you need to send rocket up through a minefield
or arrow field that player would die in....

level with 100 random flapper...vertical jumping section in middle...332

how about a level where you have a cannon following you through a constricting one way
maze, probably up past semi solid and then kill it with a bomb

make a level that relies on being able to carry a door through a door

------------------------------------------------------
------------------------ ememy ideas -----------------
------------------------------------------------------

how about an enemy that jumps over the player and fires down when directly over
invincible to sideways player shots

What if I made a cloner that could detect when what it created was destroyed and make a new ones?

what if I made on option for cloner to destroy all that it had created when trigger to create more...
that could be useful for timed things and other stuff

what if when a player is in a cloner src that fires, a free man is created?


------------------------------------------------------
------------------------ item ideas ------------------
------------------------------------------------------

make a green ball that you need to carry to its corresponding base to emit a trigger event


make the type of key you need to take to a matching lock
when you touch the lock it will show the blocks that get removed

something you jump on just like a switch
only emits toggle on and toggle off depending on shape...

something you shoot and it emits a trigger
make an obvious item that reacts when getting shot... toggle on and off..


matching set of items that need to be brought together
you can carry these around just like items...

what if you could carry around normal triggers and the field would follow?


trigger field that has a count of enemies or items or players

how about making health bonus only take the amount of health needed to get to 100
if any is left, just subtract and don't erase the item

what if you had to press FIRE to grab a rocket, but then after that you did not need to hold FIRE?
you could dismount with JUMP? ... that sounds cool

does remote trigger have a delay before the explosion?
I want it immediate to help the player time exploding moving things

make a field that manipulates the players controls, like gravity, etc...


---------------------------------------------------------
------------------ web docs -----------------------------
---------------------------------------------------------

2023

done:
netgame_client_state
netgame_client_control_change
netgame_state_and_dif
netgame_ping
netgame_client_timing_sync
netgame_packets
netgame_fast_packet_loop
netgame_config
netgame_join
netgame_server_state


to do:
netgame_main (or overview) the main landing page that gives the highest level description and links to all the other pages
netgame_status..started



netgame_server_setup
like join, but from the client's side....

maybe join should be more like client_join...











links:
fpl
client to dsync..done
server read buffer timetamp to not done in server_proc_cdat_packet....
ping, pong, pang,...done

cts
client rx stdf link to fpl...done





















--------------------------------------------------------
------------------- reduce globals ----------------------
---------------------------------------------------------

---------------------------------------------------------
------------------------ linux --------------------------
---------------------------------------------------------

---------------------------------------------------------
------------------------ Help file ------------
---------------------------------------------------------

The level editor has four major modes:

1 - Main editor
- most common way to draw blocks and add objects from selection window
- also can set draw item with mouse b2 and put draw item with mouse b1
- the only mode that has the pop-up menu

2 - Zoom Full Screen
- mostly used for manipulating rectagular selections of the level
- clear, copy, paste, move, save and load selection to disk...
- block fill, block frame, block floodfill

3 - Object Viewer
- used for manipulating properties of indiviudual objects, (items, enemies, lifts)
- can move and edit object properties with buttons and sliders
- can move and edit object properties with map

4 - Group Edit
- used for maninulating groups of objects (items and enemies)
- can set or randomize locations, variables, etc


All modes have a scalable level in the background.
It can be adjusted just like when the game is running
- scale can be adjusted with F5/F6
- fullscreen can be toggled with F12
- CTRL SHIFT F12 cycles the ortho double




---------------------------------------------------------
---------------------- Wish List ------------------------
---------------------------------------------------------


end of level stats:

number of:

enemies left
enemies killed
shots fired

per player:
enemies killed
shots fired
damage taken
health picked up


make more items that help the puzzle aspect.
like??

a key and lock type thing where you need to bring the key to the lock

companion cubes you can carry around
to jump off or weigh down switches

blocks that take more that one hit to clear

helpless victims that you need to rescue by bringing them to a safe spot

enemy that freezes when you look at it

make more shapes for player, I don't like static shape when jumping or falling

better profiling to find bottleneck

add a more things to customize:
like:

hystersis window
screen messages
bottom messages

make the main game loop called from the event loop
instead of calling the event loop from game loop
see if this improves performance

fix hysteresis window move when zooming

make other kind of mines, like spikes, lava, flames...etc

make player wall collisions pixel perfect like when on ladder???
make single block navigation like ladder move...
this will make jumping up into single block opening very hard...
this sound like a major re-write..

