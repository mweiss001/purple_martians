------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
BUGS!!
------------------------------------------------------------------------------
playing demo levels does not restore original player color when done

in netgame when a level is done and everyone returns to overworld,
why do they all come abck at different places?
was it where they were before they were sucked into the last level played?
I think it was...
should I leave it like that or force everyone to come back at the level they just played?


on sessions web page, when current gm is not set make it say that instead of not found







------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
TO DO
------------------------------------------------------------------------------



------------------------------------------------------------------------------
sessions and gm
---------------

add update session to fire every second so I can see changes

it seems like next level and exits stats are a bit high???

gm add/update to database
is it missing something?
when a client quits and rejoins the same level, that should be a new session


------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
figure out minimum permissions needed on server
- web root and everything in path
- path to database that is used in webroot
- path to savegames that is aliased in webroot
make a script to set these persmissions
------------------------------------------------------------------------------

------------------------------------------------------------------------------

------------------------------------------------------------------------------


------------------------------------------------------------------------------
------------------------------------------------------------------------------
player name - make small text label above player optional
------------------------------------------------------------------------------
------------------------------------------------------------------------------
-----------------------------------------------------------------------------



------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------

------------------------------------------------------------------------------
make a way of cleaning up log files periodically
or just put them in the database....

-----------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------

------------------------------------------------------------------------------


------------------------------------------------------------------------------
------------------------------------------------------------------------------
even if I change servers, I want to always keep all the sessions and games files
never lose them!!


------------------------------------------------------------------------------


------------------------------------------------------------------------------
make a way to change settings on remote server
I mean, I have a way, but is it a good way?
what if I get the settings.pm file from the server
edit it and send it back
how big is it? settings.pm is 8K
------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------









------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------
---------------------   DONE   -----------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------




















------------------------------------------------------------------------------------------------------------------------------------------------------------
bug - play all levels and set stats is broken
void mwLevel::add_play_data_record(int lev, int type)
{
   printf("void mwLevel::add_play_data_record(int lev, int type))\n");
   int save_flag = 1;
   if (mPlayer.syn[mPlayer.active_local_player].control_method == PM_PLAYER_CONTROL_METHOD_DEMO_MODE) save_flag = 0; // if running demo mode, don't save data
   if (mLevel.skc_trigger_demo_cheat) save_flag = 1;                        // in cheat mode save data
   if (mDemoMode.demo_debug_running_demo_saves_level_data) save_flag = 1;   // or if this is option is set
   if (lev == 1) save_flag = 0;                                             // never save data for overworld
   printf("mDemoMode.demo_debug_running_demo_saves_level_data:%d\n", mDemoMode.demo_debug_running_demo_saves_level_data);
   printf("void mwLevel::add_play_data_record(int lev, int type)) Save flag:%d  \n", save_flag);
   save_flag = 1;                                             // never save data for overworld
   if (save_flag)
fixed...not even a bug...there is a check box in misc called: "Running demo always saves level data"
------------------------------------------------------------------------------------------------------------------------------------------------------------
meta section for gm files
store ints as rows
redo all gm files
unique id in meta section for gm file version
keep old reader along with new one
save in new format
------------------------------------------------------------------------------------------------------------------------------------------------------------
bug server not happy when database is erased (then don't do that :)
test...
cannot reproduce, worked fine when I tried it 20260109
------------------------------------------------------------------------------------------------------------------------------------------------------------
server is seg faulting but only when started as service and client joins
happens everytime
I wish I could easily turn on full logging
I have all the logging on and I still don't know what happens...
it dies before it can save any logs
I cant see what it prints
after many hours i divcovered I needed to set working dir for pm service
------------------------------------------------------------------------------------------------------------------------------------------------------------
find players in save game (not needed anymore)
------------------------------------------------------------------------------
make new table player names (unique with ip, hostname, color???)
------------------------------------------------------------------------------
add players from sessions and gm
------------------------------------------------------------------------------
----------------------------------------------
I can also show players in gm table now!!!
I could also make a table of players
then just link them to sessions and gm's !!!!
-------------------------------------------------------------
do something different with database creation in mSql class
check for if databse file exists
check if tables exist...
don't show as much info if all is well
------------------------------------------------------------------------------
add player name to end of level stats...done
------------------------------------------------------------------------------
add very small text name above player..done
how about only remote players have the label? I like that!!
------------------------------------------------------------------------------
it is a little convoluted how I do session logs
save them to disk, then process them periodically with cron and php
in conjunction with database..
if I could just do all that from the server and C++ and a database connection it could be much simpler
I have not done that beacuse I did not want to tie up the server
but really, how much overhead could it take to enter a few things in a database
is there really any reason to use mysql? why do I need remote network access to the database
anything the webpage shows will be on the same physical machine




if database is erase, php will try to create it...i don't want that


text duration in current session no longer lines up



show the player name and color in sessions table, maybe even a little player icon

player name and icon of current session



------------------------------------------------------------------------------
------------------------------------------------------------------------------
show buttons instead of links for sessions table filter
------------------------------------------------------------------------------
top navigation row
------------------------------------------------------------------------------
buttons to filter current session info

move all of sessions section code to php file
includes to all be at top
include to just include function not actually show until function is called
done...


I have been thinking about c string vs c++ std:string
in the words of Boromir, 'do you not suffer needlessly?'




implement player name (Do it Fool!) ... did it fool !!!
Im thinking a fixed length of 8 char max
add it to the player structure
whe a pleyer joins the game move will now need the player name
and it will need to be passed with the join packet
set it in setting, if not set, have it set to 'default' and translate that to "Player 1" etc...
when I do that, I would like to save the player name in more places
like in the game moves files


------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------

I want to change the directory structure of my project.
docs will now have all the doss
web will now have the webpage
the only reason I changed it was because github was hosting my page...
At the time it seemed like a good idea to have a free host site for my project docs
but now that I have my own server, I don't care about that anymore
change hard link in pmhelp


------------------------------------------------------------------------------

rename the godmamn scrape shit
put them in their own dir

Directory of C:\pm\scrape
2025-12-30  09:55 AM             1,841 scrape_gm.php
2024-07-14  10:28 PM               815 scrape_net
2025-12-29  12:12 AM             7,611 scrape_session.php
2024-07-14  10:28 PM               839 scrape_status
rename the cron shit: done


------------------------------------------------------------------------------
document logging better
make a folder called logging..done
------------------------------------------------------------------------------

make a variable or 2 to kill log_net and log_status

#define LOG_OTH_draw               54
#define LOG_NET_CSV                66

   i = LOG_OTH_draw;                log_types[i].group = 3;   strcpy(log_types[i].name, "LOG_OTH_draw");
   i = LOG_NET_CSV;                 log_types[i].group = 3;   strcpy(log_types[i].name, "LOG_NET_CSV"); log_types[i].action = 0;

now it shows up at the bottom of OTH
it is off by default

try this....

------------------------------------------------------------------------------

finish the notes about how to create server
see if I have the right php permissions
the answer is yes!!!
redo everything
------------------------------------------------------------------------------
fix the php scripts..done..now deploy to live server
------------------------------------------------------------------------------

exclude scrapes from git backup
in .gitignore
/scrape_cronoutput.txt
/scrape_status_cronoutput.txt
/session_scrape_cronoutput.txt

























------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
crazy ideas that I probably will never do
------------------------------------------------------------------------------


------------------------------------------------------------------------------
Qt WASM 
allegro in browser also
------------------------------------------------------------------------------


There is a lot of info in level stats that would be better suited in database. Just saying..






------------------------------------------------------------------------------
